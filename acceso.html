<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Acceso</title>
    <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
    <header>
        <p><strong>CADENA DE SUMINISTROS</strong></p>
        <nav>
            <ul>
                <li><a href="/index">Inicio</a></li>
                <li><a href="/acceso" class="active">Acceso</a></li>
                <li><a href="/tipodeusuario">Tipo de Usuario</a></li>
                <li><a href="/conclusion">Conclusi√≥n</a></li>
                <li><a href="/bibliografia">Bibliograf√≠a</a></li>
                <li><a href="/navegacion">Mapa de Navegaci√≥n</a></li>
                <li>
                    <div class="user-info" id="userInfo" style="display: none;">
                        <button class="user-button" onclick="toggleUserMenu()">
                            <span class="user-icon">üë§</span>
                            <span class="user-name" id="headerUserName">Usuario</span>
                            <span class="user-arrow">‚ñº</span>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="user-dropdown-header">
                                <p><strong>Nombre:</strong> <span id="dropdownUserName">-</span></p>
                                <p><strong>Rol:</strong> <span id="dropdownUserRole">-</span></p>
                            </div>
                            <button class="logout-button" onclick="cerrarSesion()">üö™ Cerrar Sesi√≥n</button>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="usuario">
            <h2>Tipo de Usuario</h2>
            
            <!-- Formulario de registro y autenticaci√≥n -->
            <div class="user-form" id="registerForm">
                <h3>Registro de Usuario</h3>
                <form id="userForm">
                    <div class="form-group">
                        <label for="nombre">Nombre y Apellido:</label>
                        <input type="text" id="nombre" name="nombre" required minlength="3">
                        <small class="form-text">Ingrese nombres y apellidos completos</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="tipoDocumento">Tipo de Documento de Identidad:</label>
                        <select id="tipoDocumento" name="tipoDocumento" required>
                            <option value="">Seleccione...</option>
                            <option value="cc">C√©dula de Ciudadan√≠a</option>
                            <option value="ce">C√©dula de Extranjer√≠a</option>
                            <option value="ti">Tarjeta de Identidad</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="numeroDocumento">N√∫mero de Documento de Identidad:</label>
                        <input type="text" id="numeroDocumento" name="numeroDocumento" required pattern="[0-9]{5,15}" maxlength="15" placeholder="12345678" title="Debe ser un n√∫mero de 5 a 15 d√≠gitos">
                        <small class="form-text">Ingrese su n√∫mero de documento de identidad</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="tipoUsuario">Tipo de Usuario:</label>
                        <select id="tipoUsuario" name="tipoUsuario" required>
                            <option value="">Seleccione...</option>
                            <option value="lider">L√≠der De Compras</option>
                            <option value="analista">Analista</option>
                            <option value="desarrollador">Desarrollador</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="contrase√±a">Contrase√±a:</label>
                        <input type="password" id="contrase√±a" name="contrase√±a" required minlength="6" maxlength="20">
                        <small class="form-text">M√≠nimo 6 caracteres (letras, n√∫meros y caracteres especiales permitidos)</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmarContrase√±a">Confirmar Contrase√±a:</label>
                        <input type="password" id="confirmarContrase√±a" name="confirmarContrase√±a" required>
                        <small class="form-text">Debe coincidir con la contrase√±a</small>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit">Registrarse</button>
                        <button type="button" onclick="showLoginForm()">¬øYa tienes cuenta? Iniciar Sesi√≥n</button>
                    </div>
                </form>
            </div>

            <!-- Formulario de inicio de sesi√≥n -->
            <div class="user-form" id="loginForm">
                <h3>Iniciar Sesi√≥n</h3>
                <form id="loginFormElement">
                    <div class="form-group">
                        <label for="loginDocumento">N√∫mero de Documento:</label>
                        <input type="text" id="loginDocumento" name="loginDocumento" required pattern="[0-9]{5,15}" maxlength="15" placeholder="12345678">
                    </div>
                    
                    <div class="form-group">
                        <label for="loginContrase√±a">Contrase√±a:</label>
                        <input type="password" id="loginContrase√±a" name="loginContrase√±a" required>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit">Iniciar Sesi√≥n</button>
                        <button type="button" onclick="showRegisterForm()">¬øNo tienes cuenta? Registrarse</button>
                    </div>
                    <div style="text-align: center; margin-top: 1rem;">
                        <a href="#" onclick="showRecoveryForm(); return false;" style="color: #0f62fe; text-decoration: underline; font-size: 0.9rem;">¬øOlvidaste tu contrase√±a?</a>
                    </div>
                </form>
            </div>

            <!-- Formulario de recuperaci√≥n de contrase√±a -->
            <div class="user-form" id="recoveryForm" style="display: none;">
                <h3>üîê Recuperar Contrase√±a</h3>
                <p style="margin-bottom: 1rem; color: #666;">Ingresa tu n√∫mero de documento para recuperar tu contrase√±a.</p>
                <form id="recoveryFormElement">
                    <div class="form-group">
                        <label for="recoveryDocumento">N√∫mero de Documento:</label>
                        <input type="text" id="recoveryDocumento" name="recoveryDocumento" required pattern="[0-9]{5,15}" maxlength="15" placeholder="12345678">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit">Recuperar Contrase√±a</button>
                        <button type="button" onclick="showLoginForm()">Volver al Login</button>
                    </div>
                </form>
                
                <div id="recoveryResult" style="display: none; margin-top: 1.5rem; padding: 1rem; background: #d4edda; border-radius: 8px; border-left: 4px solid #28a745;">
                    <h4 style="color: #155724; margin-bottom: 0.5rem;">‚úÖ Datos de tu cuenta</h4>
                    <p><strong>Nombre:</strong> <span id="recoveryNombre"></span></p>
                    <p><strong>Contrase√±a:</strong> <span id="recoveryPassword" style="font-family: monospace; background: #fff; padding: 0.2rem 0.5rem; border-radius: 4px;"></span></p>
                    <p style="margin-top: 1rem; font-size: 0.85rem; color: #666;">Por seguridad, te recomendamos anotar tu contrase√±a y guardarla en un lugar seguro.</p>
                </div>
            </div>                       
        </section>
    </main>

    <footer>
        <p>¬© 2026 Cadena de Suministros | Excelencia como est√°ndar, compromiso como principio.</p>
        <p>Autora: Aleydys Laura Morales</p>
    </footer>

    <script>
        // ===================
        // VERSI√ìN SIMPLIFICADA DIRECTAMENTE EN HTML
        // ===================
        
        let currentUser = null;
        let currentMaterials = [];
        
        // Materiales por defecto para pruebas
        const defaultMaterials = [
            { id: 1, nombre: "Cemento gris", precio: 32000, categoria: "Materiales cementantes", stock: 100, proveedor: "Cemex Colombia" },
            { id: 2, nombre: "Varilla de acero", precio: 28000, categoria: "Estructurales", stock: 50, proveedor: "Acer√≠as Paz del R√≠o" },
            { id: 3, nombre: "Ladrillo cer√°mico", precio: 850, categoria: "Mamposter√≠a", stock: 1000, proveedor: "Cer√°micas Andina" },
            { id: 4, nombre: "Arena gruesa", precio: 15000, categoria: "Agregados", stock: 500, proveedor: "Canteras del R√≠o" },
            { id: 5, nombre: "Bloque de concreto", precio: 2500, categoria: "Mamposter√≠a", stock: 800, proveedor: "Prefabricados Nacional" },
            { id: 6, nombre: "Acero corrugado", precio: 29000, categoria: "Estructurales", stock: 40, proveedor: "Acer√≠as Paz del R√≠o" }
        ];
        
        // Usuarios registrados
        let registeredUsers = [];
        
        // Cargar datos desde localStorage
        function loadData() {
            try {
                const savedUsers = localStorage.getItem('cadenaSuministros_usuarios');
                if (savedUsers) {
                    registeredUsers = JSON.parse(savedUsers);
                }
                
                const savedMaterials = localStorage.getItem('cadenaSuministros_materiales');
                if (savedMaterials) {
                    currentMaterials = JSON.parse(savedMaterials);
                } else {
                    currentMaterials = defaultMaterials;
                    saveMaterials();
                }
                
                const savedSession = localStorage.getItem('cadenaSuministros_sesionActiva');
                if (savedSession) {
                    const sessionData = JSON.parse(savedSession);
                    const sessionAge = Date.now() - sessionData.loginTime;
                    const maxSessionAge = 24 * 60 * 60 * 1000; // 24 horas
                    
                    if (sessionAge < maxSessionAge) {
                        currentUser = sessionData.user;
                        showDatabaseInterface();
                        showUserBanner();
                        showMessage(`Bienvenido de vuelta, ${currentUser.nombre}!`, 'success');
                    } else {
                        localStorage.removeItem('cadenaSuministros_sesionActiva');
                    }
                }
            } catch (error) {
                console.error('Error cargando datos:', error);
            }
        }
        
        // Guardar datos
        function saveUsers() {
            try {
                localStorage.setItem('cadenaSuministros_usuarios', JSON.stringify(registeredUsers));
            } catch (error) {
                console.error('Error guardando usuarios:', error);
            }
        }
        
        function saveMaterials() {
            try {
                localStorage.setItem('cadenaSuministros_materiales', JSON.stringify(currentMaterials));
            } catch (error) {
                console.error('Error guardando materiales:', error);
            }
        }
        
        // Mostrar mensaje
        function showMessage(message, type = 'info') {
            const messageEl = document.createElement('div');
            messageEl.className = `message message-${type}`;
            messageEl.textContent = message;
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
                max-width: 300px;
            `;
            
            const colors = {
                success: '#28a745',
                error: '#dc3545',
                info: '#17a2b8',
                warning: '#ffc107'
            };
            
            messageEl.style.backgroundColor = colors[type] || colors.info;
            
            document.body.appendChild(messageEl);
            
            setTimeout(() => {
                messageEl.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (messageEl.parentNode) {
                        messageEl.parentNode.removeChild(messageEl);
                    }
                }, 300);
            }, 3000);
        }
        
        function showUserBanner() {
            const userInfo = document.getElementById('userInfo');
            if (currentUser && userInfo) {
                userInfo.style.display = 'flex';
                document.getElementById('headerUserName').textContent = currentUser.nombre;
                document.getElementById('dropdownUserName').textContent = currentUser.nombre;
                
                const roleNames = {
                    'lider': 'L√≠der de Compras',
                    'analista': 'Analista',
                    'desarrollador': 'Desarrollador'
                };
                document.getElementById('dropdownUserRole').textContent = roleNames[currentUser.tipoUsuario] || currentUser.tipoUsuario;
            }
        }
        
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('show');
        }
        
        function cerrarSesion() {
            if (confirm('¬øEst√° seguro que desea cerrar sesi√≥n?')) {
                localStorage.removeItem('cadenaSuministros_sesionActiva');
                currentUser = null;
                location.reload();
            }
        }
        
        // Cerrar dropdown al hacer clic fuera
        document.addEventListener('click', function(e) {
            const userInfo = document.getElementById('userInfo');
            const dropdown = document.getElementById('userDropdown');
            if (userInfo && !userInfo.contains(e.target)) {
                dropdown.classList.remove('show');
            }
        });
        
        // Navegaci√≥n entre formularios
        function showLoginForm() {
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('recoveryForm').style.display = 'none';
            document.getElementById('recoveryResult').style.display = 'none';
            
            // Pre-llenar con √∫ltimo usuario
            if (registeredUsers.length > 0) {
                document.getElementById('loginDocumento').value = registeredUsers[registeredUsers.length - 1].numeroDocumento;
            }
        }
        
        function showRegisterForm() {
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('recoveryForm').style.display = 'none';
        }
        
        function showRecoveryForm() {
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('recoveryForm').style.display = 'block';
            document.getElementById('recoveryResult').style.display = 'none';
            document.getElementById('recoveryFormElement').reset();
        }
        
        function showDatabaseInterface() {
            // Redirigir a tipodeusuario cuando hay sesi√≥n activa
            window.location.href = '/tipodeusuario';
        }
        
        // Registro de usuario
        document.getElementById('userForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            console.log('Registrando usuario...');
            
            const nombre = document.getElementById('nombre').value.trim();
            const tipoDocumento = document.getElementById('tipoDocumento').value;
            const numeroDocumento = document.getElementById('numeroDocumento').value.trim();
            const tipoUsuario = document.getElementById('tipoUsuario').value;
            const contrase√±a = document.getElementById('contrase√±a').value;
            const confirmarContrase√±a = document.getElementById('confirmarContrase√±a').value;
            
            console.log('Nombre:', nombre);
            console.log('Tipo documento:', tipoDocumento);
            console.log('N√∫mero documento:', numeroDocumento);
            console.log('Tipo usuario:', tipoUsuario);
            
            // Validaciones
            if (!nombre || nombre.length < 3) {
                showMessage('El nombre debe tener al menos 3 caracteres', 'error');
                return;
            }
            
            if (!tipoDocumento) {
                showMessage('Seleccione un tipo de documento', 'error');
                return;
            }
            
            if (!/^[0-9]{5,15}$/.test(numeroDocumento)) {
                showMessage('El n√∫mero de documento debe tener entre 5 y 15 d√≠gitos', 'error');
                return;
            }
            
            if (!tipoUsuario) {
                showMessage('Seleccione un tipo de usuario', 'error');
                return;
            }
            
            if (!contrase√±a || contrase√±a.length < 6) {
                showMessage('La contrase√±a debe tener al menos 6 caracteres', 'error');
                return;
            }
            
            if (contrase√±a !== confirmarContrase√±a) {
                showMessage('Las contrase√±as no coinciden', 'error');
                return;
            }
            
            // Verificar duplicado
            const existingUser = registeredUsers.find(u => u.numeroDocumento === numeroDocumento);
            if (existingUser) {
                showMessage('Ya existe un usuario con este n√∫mero de documento', 'error');
                return;
            }
            
            // Crear usuario
            const newUser = {
                id: Date.now(),
                nombre,
                tipoDocumento,
                numeroDocumento,
                tipoUsuario,
                contrase√±a,
                createdAt: new Date().toISOString()
            };
            
            registeredUsers.push(newUser);
            saveUsers();
            
            showMessage('Usuario registrado correctamente. Ahora puede iniciar sesi√≥n.', 'success');
            document.getElementById('userForm').reset();
            
            // Mostrar formulario de login para que pueda iniciar sesi√≥n
            showLoginForm();
        });
        
        // Login de usuario
        document.getElementById('loginFormElement').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            console.log('Intentando login...');
            console.log('Usuarios registrados:', registeredUsers);
            
            const documento = document.getElementById('loginDocumento').value.trim();
            const contrase√±a = document.getElementById('loginContrase√±a').value;
            
            console.log('Documento:', documento);
            
            if (!documento) {
                showMessage('Ingrese su n√∫mero de documento', 'error');
                return;
            }
            
            if (!/^[0-9]{5,15}$/.test(documento)) {
                showMessage('El n√∫mero de documento debe tener entre 5 y 15 d√≠gitos', 'error');
                return;
            }
            
            if (!contrase√±a) {
                showMessage('Ingrese su contrase√±a', 'error');
                return;
            }
            
            // Buscar usuario
            console.log('Buscando usuario con documento:', documento);
            const user = registeredUsers.find(u => u.numeroDocumento === documento && u.contrase√±a === contrase√±a);
            console.log('Usuario encontrado:', user);
            
            if (!user) {
                showMessage('Documento o contrase√±a incorrectos', 'error');
                return;
            }
            
            // Iniciar sesi√≥n
            currentUser = {
                id: user.id,
                nombre: user.nombre,
                tipoUsuario: user.tipoUsuario,
                numeroDocumento: user.numeroDocumento
            };
            
            // Guardar sesi√≥n
            const sessionData = {
                user: currentUser,
                loginTime: Date.now()
            };
            localStorage.setItem('cadenaSuministros_sesionActiva', JSON.stringify(sessionData));
            
            showMessage(`¬°Bienvenido ${currentUser.nombre}! Redirigiendo...`, 'success');
            
            // Redirigir a la p√°gina de Tipo de Usuario despu√©s de 1.5 segundos
            setTimeout(() => {
                window.location.href = '/tipodeusuario';
            }, 1500);
        });
        
        // Recuperaci√≥n de contrase√±a
        document.getElementById('recoveryFormElement').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const documento = document.getElementById('recoveryDocumento').value.trim();
            
            if (!documento) {
                showMessage('Ingrese su n√∫mero de documento', 'error');
                return;
            }
            
            if (!/^[0-9]{5,15}$/.test(documento)) {
                showMessage('El n√∫mero de documento debe tener entre 5 y 15 d√≠gitos', 'error');
                return;
            }
            
            // Buscar usuario
            const user = registeredUsers.find(u => u.numeroDocumento === documento);
            
            if (!user) {
                showMessage('No se encontr√≥ ning√∫n usuario con ese n√∫mero de documento', 'error');
                return;
            }
            
            // Mostrar resultado
            document.getElementById('recoveryNombre').textContent = user.nombre;
            document.getElementById('recoveryPassword').textContent = user.contrase√±a;
            document.getElementById('recoveryResult').style.display = 'block';
            
            showMessage('Contrase√±a recuperada exitosamente', 'success');
        });
        
        // Mostrar materiales
        function displayMaterials(materials = currentMaterials) {
            const databaseContent = document.getElementById('databaseContent');
            
            if (materials.length === 0) {
                databaseContent.innerHTML = '<div class="no-materials">No hay materiales registrados</div>';
                return;
            }
            
            const tableHTML = `
                <div class="materials-table-container">
                    <table class="materials-table">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Precio</th>
                                <th>Categor√≠a</th>
                                <th>Stock</th>
                                <th>Proveedor</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${materials.map(material => `
                                <tr class="material-row">
                                    <td class="material-name">${material.nombre}</td>
                                    <td class="material-price">$${material.precio.toLocaleString('es-CO')}</td>
                                    <td class="material-category">${material.categoria}</td>
                                    <td class="material-stock ${material.stock <= 10 ? 'low-stock' : ''}">${material.stock}</td>
                                    <td class="material-provider">${material.proveedor}</td>
                                    <td class="material-actions">
                                        <button onclick="editMaterial(${material.id})" class="btn-edit">‚úèÔ∏è</button>
                                        <button onclick="deleteMaterial(${material.id})" class="btn-delete">üóëÔ∏è</button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            databaseContent.innerHTML = tableHTML;
        }
        
        // Actualizar estad√≠sticas
        function updateStatistics() {
            document.getElementById('totalMaterials').textContent = currentMaterials.length;
            document.getElementById('totalValue').textContent = `$${currentMaterials.reduce((sum, m) => sum + m.precio, 0).toLocaleString('es-CO')}`;
            document.getElementById('totalCategories').textContent = [...new Set(currentMaterials.map(m => m.categoria))].length;
            document.getElementById('lowStock').textContent = currentMaterials.filter(m => m.stock <= 10).length;
        }
        
        // CRUD de materiales
        function addMaterial(material) {
            material.id = Date.now();
            currentMaterials.push(material);
            saveMaterials();
            displayMaterials();
            updateStatistics();
            showMessage('Material agregado correctamente', 'success');
        }
        
        function editMaterial(id) {
            const material = currentMaterials.find(m => m.id === id);
            if (material && confirm(`¬øEditar "${material.nombre}"?`)) {
                const newPrice = prompt('Nuevo precio:', material.precio);
                if (newPrice && !isNaN(newPrice)) {
                    material.precio = parseFloat(newPrice);
                    saveMaterials();
                    displayMaterials();
                    updateStatistics();
                    showMessage('Material actualizado correctamente', 'success');
                }
            }
        }
        
        function deleteMaterial(id) {
            const index = currentMaterials.findIndex(m => m.id === id);
            if (index !== -1) {
                const material = currentMaterials[index];
                if (confirm(`¬øEliminar "${material.nombre}"?`)) {
                    currentMaterials.splice(index, 1);
                    saveMaterials();
                    displayMaterials();
                    updateStatistics();
                    showMessage('Material eliminado correctamente', 'success');
                }
            }
        }
        
        // Descargar base de datos
        function downloadDatabase(format) {
            let content, filename, mimeType;
            
            if (format === 'csv') {
                const headers = ['ID', 'Nombre', 'Precio', 'Categor√≠a', 'Stock', 'Proveedor'];
                const rows = currentMaterials.map(m => 
                    [m.id, m.nombre, m.precio, m.categoria, m.stock, m.proveedor].join(',')
                );
                content = [headers.join(','), ...rows].join('\n');
                filename = 'materiales.csv';
                mimeType = 'text/csv';
            }
            
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
            
            showMessage(`Base de datos descargada: ${filename}`, 'success');
        }
        
        // Cerrar sesi√≥n
        function logout() {
            currentUser = null;
            localStorage.removeItem('cadenaSuministros_sesionActiva');
            document.getElementById('databaseSection').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            showMessage('Sesi√≥n cerrada correctamente', 'info');
        }
        
        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            
            // B√∫squeda
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    const query = e.target.value.toLowerCase();
                    const filtered = currentMaterials.filter(m => 
                        m.nombre.toLowerCase().includes(query) ||
                        m.categoria.toLowerCase().includes(query) ||
                        m.proveedor.toLowerCase().includes(query)
                    );
                    displayMaterials(filtered);
                });
            }
            
            // Actualizar
            const refreshBtn = document.getElementById('refreshBtn');
            if (refreshBtn) {
                refreshBtn.addEventListener('click', () => {
                    displayMaterials();
                    updateStatistics();
                    showMessage('Base de datos actualizada', 'info');
                });
            }
            
            // Agregar material
            const addMaterialBtn = document.getElementById('addMaterialBtn');
            if (addMaterialBtn) {
                addMaterialBtn.addEventListener('click', () => {
                    const name = prompt('Nombre del material:');
                    if (!name) return;
                    
                    const price = prompt('Precio:');
                    if (!price || isNaN(price)) return;
                    
                    const category = prompt('Categor√≠a:');
                    if (!category) return;
                    
                    const stock = prompt('Stock:');
                    if (!stock || isNaN(stock)) return;
                    
                    const provider = prompt('Proveedor:');
                    if (!provider) return;
                    
                    addMaterial({
                        nombre: name,
                        precio: parseFloat(price),
                        categoria: category,
                        stock: parseInt(stock),
                        proveedor: provider
                    });
                });
            }
        });
        
        // Estilos animaci√≥n
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            
            /* Estilos para el banner de usuario */
            .user-info {
                display: flex;
                align-items: center;
                margin-left: 1rem;
            }
            
            .user-button {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                background: rgba(255,255,255,0.2);
                border: 1px solid rgba(255,255,255,0.3);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                cursor: pointer;
                font-size: 0.9rem;
                transition: background 0.3s;
            }
            
            .user-button:hover {
                background: rgba(255,255,255,0.3);
            }
            
            .user-icon {
                font-size: 1.1rem;
            }
            
            .user-arrow {
                font-size: 0.7rem;
                transition: transform 0.3s;
            }
            
            .user-dropdown {
                display: none;
                position: absolute;
                top: 100%;
                right: 0;
                background: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                min-width: 200px;
                z-index: 1000;
                margin-top: 0.5rem;
            }
            
            .user-dropdown.show {
                display: block;
                animation: slideIn 0.3s ease-out;
            }
            
            .user-dropdown-header {
                padding: 1rem;
                border-bottom: 1px solid #eee;
                color: #333;
            }
            
            .user-dropdown-header p {
                margin: 0.3rem 0;
                font-size: 0.9rem;
            }
            
            .logout-button {
                width: 100%;
                padding: 0.8rem 1rem;
                border: none;
                background: #dc3545;
                color: white;
                cursor: pointer;
                font-size: 0.9rem;
                border-radius: 0 0 8px 8px;
                text-align: left;
            }
            
            .logout-button:hover {
                background: #c82333;
            }
            
            nav {
                position: relative;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>